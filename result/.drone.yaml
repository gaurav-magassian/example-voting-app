---
kind: pipeline
name: CI
type: docker
steps:
- name: publish
  image: banzaicloud/drone-kaniko
  settings:
    registry: registry.hub.docker.com # if not provided index.docker.io is supposed
    repo: dhavlev
    tags: ${DRONE_COMMIT_SHA}
    cache: true
    dockerfile: result/Dockerfile
    skip_tls_verify: true # set to true for testing registries ONLY with self-signed certs
    build_args:
    - COMMIT_SHA=${DRONE_COMMIT_SHA}
    - COMMIT_AUTHOR_EMAIL=${DRONE_COMMIT_AUTHOR_EMAIL}
    username:
      from_secret: docker_username
    password:
      from_secret: docker_password






